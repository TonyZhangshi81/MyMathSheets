<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">
	<link rel="icon" href="../Content/favicon.ico">
	<link href="../Content/bootstrap.min.css" rel="stylesheet" charset="utf-8">
	<script src="../Scripts/jquery-3.0.0.min.js" charset="utf-8"></script>
	<script src="../Scripts/bootstrap.min.js" charset="utf-8"></script>
	<script src="../Scripts/store.legacy.min.js" charset="utf-8"></script>
	<script src="../Scripts/json2.min.js" charset="utf-8"></script>
	<!--ARITHMETICSCRIPT-->
	<!--EQUALITYCOMPARISONSCRIPT-->
	<!--COMPUTINGCONNECTIONSCRIPT-->
	<!--MATHWORDPROBLEMSSCRIPT-->
	<title>題庫</title>

	<style type="text/css">
		.row-margin-top {
			margin-top: 10px;
		}
		
		.hr-Ext {
			margin-bottom: 0rem;
		}

		.jumbotron-ext {
			padding: 2rem 3rem;
			border-radius: 0.8rem;
			background: url("../Content/image/timg.png") no-repeat;
			background-size:100% 100%;
		}

		.main-ext {
			background-color: aliceblue;
		}

		.btn-circle {
			width: 30px;
			height: 30px;
			text-align: center;
			padding: 6px 0;
			font-size: 12px;
			line-height: 1.428571429;
			border-radius: 15px;
		}

		.input-print {
			border: 1px solid black;
		}

		.input-addBorder {
			border: 1px solid black;
		}

		.button-addBorder {
			border: 1px solid black;
			background: white;
		}
		
		.label-title{
			margin-bottom: 0.5rem;
			font-family: inherit;
			font-weight: 500;
			line-height: 1.2;
			font-size: 2.5rem;
			color: white;
		}
		
		.div-famousPeople{
			margin-left:30px;
		}
		
		.text-info{
			color: #6c757d!important;
			font-size: 0.7rem;
		}
		
	</style>

	<script>
		// 頁面啟動后加載
		$(document).ready(function () {
			// 按鍵屏蔽防止刷新頁面
			forbidKeyDown();

			// 準備
			$('#btnReady').click(function () { btnReadyClick(); });
			// 提交答題
			$('#btnTheirPapers').click(function () { btnTheirPapersClick(); });
			// 訂正錯題
			$('#btnMakeCorrections').click(function () { btnMakeCorrectionsClick(); });
			// 完成
			$('#btnOver').click(function () { btnOverClick(); });
			// 打印
			$('#btnPrint').click(function () { btnPrintClick(); });

			// 還原上一次答題結果
			lastTimeRestore();
		});

		// 打印
		function btnPrintClick() {
			//<!--ARITHMETICPRINTSETTING-->
			//<!--EQUALITYCOMPARISONPRINTSETTING-->
			//<!--COMPUTINGCONNECTIONPRINTSETTING-->
			//<!--MATHWORDPROBLEMSPRINTSETTING-->

			var printId = "divPrintContent";
			var k = $("#" + printId).prop("outerHTML");
			$("body *").hide();
			$("body").append(k);
			window.print();
			$("body *").show();
			$("body #" + printId + ":last").remove();
		}

		// 顯示上一次答題結果
		function lastTimeRestore() {
			// 獲取內容
			var result = store.get('result');
			$('#spanOld').text(result.time);
			$('#spanOldOK').text(result.right);
			$('#spanOldNo').text(result.fault);
		}

		// 答題準備按鍵
		function btnReadyClick() {
			// 交卷按鈕顯示
			$('#btnTheirPapers').show();
			// 準備按鈕隱藏
			$('#btnReady').hide();
			// 設定頁面所有輸入域為可用狀態（四則運算）
			//<!--ARITHMETICREADY-->
			// 設定頁面所有輸入域為可用狀態(運算比大小)
			//<!--EQUALITYCOMPARISONREADY-->
			// 設定頁面所有輸入域為可用狀態(等式接龍)
			//<!--COMPUTINGCONNECTIONREADY-->
			// 設定頁面所有輸入域為可用狀態(算數應用題)
			//<!--MATHWORDPROBLEMSREADY-->


			// 計時開始
			startTime();
		}


		var second = 0;
		var minute = 0;
		var hour = 0;
		// 用於停止計時器(停止計時:true)
		var isStop = false;
		// 讀秒計時器(當準備按鈕按下后,答題開始,計時器開始計時)
		function startTime() {
			// 停止計時
			if (isStop) {
				return;
			}

			second++;
			// 讀秒
			$('#spanSS').text(this.checkTime(second));
			// 讀分
			minute = parseInt($('#spanMM').text());
			// 60秒后,分鐘加1,秒針歸0
			if (second == 60) {
				minute++;
				second = 0;
				$('#spanMM').text(this.checkTime(minute));
				$('#spanSS').text(this.checkTime(second));
			}
			// 讀時
			hour = parseInt($('#spanHH').text());
			// 60分后,時針加1,分針歸0
			if (minute == 60) {
				hour++;
				minute = 0;
				$('#spanHH').text(this.checkTime(hour));
				$('#spanMM').text(this.checkTime(minute));
			}
			// 59:59:59為計時器上限值,將強制停止計時器
			if (second == 59 && minute == 59 && hour == 59) {
				isStop = true;
			}
			// 定時執行(設定時間間隔為1秒)
			setTimeout('startTime()', 1000)
		}

		// 計時器-不足十位向前補0
		function checkTime(i) {
			if (i < 10) { i = "0" + i }
			return i
		}

		// 完成(關閉頁面)
		function btnOverClick() {
			window.close();
		}

		// 訂正按鈕(不計入答題情況信息)
		function btnMakeCorrectionsClick() {
			var fault = 0;
			// 四則運算題
			//<!--ARITHMETICMAKECORRECTIONS-->
			// 算式比較大小
			//<!--EQUALITYCOMPARISONMAKECORRECTIONS-->
			// 等式接龍
			//<!--COMPUTINGCONNECTIONMAKECORRECTIONS-->
			// 算數應用題
			//<!--MATHWORDPROBLEMSMAKECORRECTIONS-->

			// 是否存在錯題
			if (fault != 0) {
				// 存在:訂正按鈕顯示
				$('#btnMakeCorrections').show();
			} else {
				// 不存在：訂正按鈕隱藏，完成按鈕顯示
				$('#btnMakeCorrections').hide();
				$('#btnOver').show();
			}
		}

		// 答對數量
		var isRight = 0;
		// 答錯數量
		var isFault = 0;
		// 交卷按鈕(記錄在答題情況下,以便可以看到前一次做題情況)
		function btnTheirPapersClick() {
			// 四則運算交卷
			//<!--ARITHMETICTHEIRPAPERS-->
			// 算式比大小交卷
			//<!--EQUALITYCOMPARISONTHEIRPAPERS-->
			// 等式接龍交卷
			//<!--COMPUTINGCONNECTIONTHEIRPAPERS-->
			// 算數應用題交卷
			//<!--MATHWORDPROBLEMSTHEIRPAPERS-->


			$('#spanOK').text(isRight);
			$('#spanNo').text(isFault);
			// 對/錯圖片顯示和隱藏
			if (isFault != 0) {
				$('#btnMakeCorrections').show();
			} else {
				$('#btnOver').show();
			}
			$('#btnTheirPapers').hide();

			// 計時停止
			isStop = true;

			// 存儲變量到result鍵（答題結果）
			var timeStr = $('#spanHH').text() + '：' + $('#spanMM').text() + '：' + $('#spanSS').text();
			store.set('result', { time: timeStr, right: isRight, fault: isFault });
		}

		// 按鍵屏蔽防止刷新頁面
		function forbidKeyDown() {
			$(document).bind("keydown", function (e) {
				var e = window.event || e;
				// 屏蔽 Alt+ 方向鍵 ←
				// 屏蔽 Alt+ 方向鍵 →
				if ((e.altKey) && ((e.keyCode == 37) || (e.keyCode == 39))) {
					e.returnValue = false;
					return false;
				}

				// 屏蔽退格刪除鍵
				if (e.keyCode == 8) {
					if (document.activeElement.tagName.toLowerCase() == 'input'.toLowerCase()) {
						var typeName = document.activeElement.type.toLowerCase();
						if (typeName == 'text'.toLowerCase() || typeName == 'password'.toLowerCase()) {
							if (!document.activeElement.readOnly) {
								return true;
							}
						}
					} else if (document.activeElement.tagName.toLowerCase() == 'textarea'.toLowerCase()) {
						if (!document.activeElement.readOnly)
							return true;
					}
					return false;
				}

				// 屏蔽F5刷新建
				if (e.keyCode == 116) {
					return false;
				}

				// 屏蔽alt+R
				if ((e.ctrlKey) && (e.keyCode == 82)) {
					return false;
				}
			});

			// 禁用右鍵點擊功能
			$(document).bind("contextmenu", function (e) {
				return false;
			});
		}
	</script>
</head>
<body>
	<div class="container theme-showcase main-ext" role="main">
		<div class="jumbotron-ext">
			<div style="margin-bottom: 50px;"><span class="label label-default label-title">歡迎，數學運算</span></div>
			<div class="div-famousPeople">
				<h6>
					<span class="text-info">普羅克拉斯：哪裡有數，哪裡就有美。</span>
					<br />
					<span class="text-info">羅素：數學，如果正常的看它，不但擁有真理，而且也具有至高的美，正如雕塑的美，是一種冷而嚴肅的美。"</span>
					<br />
					<span class="text-info">華羅庚：數學是壯麗多彩、千姿百態、引人入勝的，認為數學枯燥乏味的人，只是看到了數學的嚴謹性，而沒有體會出數學的內在美。"</span>
				</h6>
			</div>
			<hr class="hr-Ext" />
			<div class="text-info">
				前一次做題用時:<span id="spanOld" style="padding-left:10px;">00：00：00</span>
				<span style="padding-left:20px;">答對:</span><span id="spanOldOK" style="padding-left:10px;"></span>題
				<span style="padding-left:20px;">答錯:</span><span id="spanOldNo" style="padding-left:10px;"></span>題
			</div>
		</div>
		<div id="divPrintContent">
		<br/>
		<!--ARITHMETIC-->
		<br/>
		<!--EQUALITYCOMPARISON-->
		<br/>
		<!--COMPUTINGCONNECTION-->
		<br/>
		<!--MATHWORDPROBLEMS-->
		<br/>
		<!-- 题型5<填充区> -->
		</div>
		<HR>
		<div class="row">
			<div class="col-md-6 col-md-offset-3">
				<p class="text-right">
					<button id="btnReady" type="button" class="btn btn-lg btn-success">準備</button>
					<button id="btnTheirPapers" type="button" class="btn btn-lg btn-success" style="display:none;">交卷</button>
					<button id="btnMakeCorrections" type="button" class="btn btn-lg btn-warning" style="display:none;">訂正</button>
					<button id="btnOver" type="button" class="btn btn-lg btn-info" style="display:none;">完成</button>
					<button id="btnPrint" type="button" class="btn btn-lg btn-info">打印</button>
				</p>
			</div>
		</div>
		<div class="page-header">
			<h4>練習情況</h4>
		</div>
		<div class="well">
			<p>
				做題用時:<span id="spanHH" style="padding-left:10px;">00</span>：<span id="spanMM">00</span>：<span id="spanSS">00</span>
				<br />答對:<span id="spanOK" style="padding-left:20px;"></span>題
				<br />打錯:<span id="spanNo" style="padding-left:20px;"></span>題
			</p>
		</div>
	</div>
</body>
</html>